(this.webpackJsonpswipeforfuture=this.webpackJsonpswipeforfuture||[]).push([[0],{11:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var a=n(10),r=n(3),i=function(t){var e;return Object(r.a)(Object(r.a)({},t),{},{params:{vars:Object(r.a)(Object(r.a)({},t.params.vars),{},{rounds:(null!==(e=t.params.vars.rounds)&&void 0!==e?e:0)+1}),flags:t.params.flags}})};function c(t,e,n,i){return function(c){var o=c.params,s=e.map((function(t){var e;return null!==(e=o.vars[t])&&void 0!==e?e:0})),u=i?s.reduce((function(t,e){return n(t,e)}),i):s.reduce((function(t,e){return n(t,e)}));return Object(r.a)(Object(r.a)({},c),{},{params:{flags:c.params.flags,vars:Object(r.a)(Object(r.a)({},c.params.vars),{},Object(a.a)({},t,u))}})}}function o(t,e,n){return function(a){return Object(r.a)(Object(r.a)({},a),{},{params:{flags:a.params.flags,vars:Object(r.a)(Object(r.a)({},a.params.vars),t.reduce((function(t,r){var i=a.params.vars[r];return void 0!==i&&(t[r]=Math.max(e,Math.min(n,i))),t}),{}))}})}}function s(t){return t.map((function(t){switch(t.type){case"round":return i;case"cycle":return o=t.id,s=t.length,function(t){var e;return Object(r.a)(Object(r.a)({},t),{},{params:{vars:Object(r.a)(Object(r.a)({},t.params.vars),{},Object(a.a)({},o,((null!==(e=t.params.vars[o])&&void 0!==e?e:0)+1)%s)),flags:t.params.flags}})};case"min":return c(t.targetId,t.sourceIds,(function(t,e){return Math.min(t,e)}));case"max":return c(t.targetId,t.sourceIds,(function(t,e){return Math.max(t,e)}));case"sum":return c(t.targetId,t.sourceIds,(function(t,e){return t+e}),0);case"debug":return e=t.stateIds,n=t.flagIds,function(t){var a=t.params,r=void 0===e?a.vars:e.reduce((function(t,e){return t[e]=a.vars[e],t}),{}),i=void 0===n?a.flags:n.reduce((function(t,e){return t[e]=a.flags[e],t}),{});return Object.keys(r).length>0&&console.table(r),Object.keys(i).length>0&&console.table(i),t};default:throw new Error("Missing modifier type: "+t.type)}var e,n,o,s}))}},14:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(4);function r(t,e){return e.some((function(e){return function(t,e){var n=e.vars,r=void 0===n?{}:n,i=e.flags,c=void 0===i?{}:i;return Object.entries(r).every((function(e){var n=Object(a.a)(e,2),r=n[0],i=Object(a.a)(n[1],2),c=i[0],o=i[1];return t.vars[r]>=c&&t.vars[r]<=o}))&&Object.entries(c).every((function(e){var n=Object(a.a)(e,2),r=n[0],i=n[1];return!!t.flags[r]===i}))}(t,e)}))}},17:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(9),r=n(3),i=n(6),c=n(8),o=function(){function t(e,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(i.a)(this,t),this._cards=void 0,this._random=void 0,this._tickModifiers=void 0,this._stats=void 0,this._initialParams=void 0;var c=r.random,o=void 0===c?Math.random:c,s=r.tickModifiers,u=void 0===s?[]:s;this._cards=e,this._random=o,this._tickModifiers=u,this._initialParams=a,this._stats=n}return Object(c.a)(t,[{key:"applyAction",value:function(t,e){var n=this._applyModifiers(Object(r.a)(Object(r.a)({},t),{},{card:void 0}),[e].concat(Object(a.a)(this._tickModifiers)));return n.card?n:Object(r.a)(Object(r.a)({},n),{},{card:this._selectWeightedRandomFrom(this._getAvailableCards(n))})}},{key:"_applyModifiers",value:function(t,e){return e.reduce((function(t,e){return e(t)}),t)}},{key:"_getAvailableCards",value:function(t){return this._cards.filter((function(e){return e.match(t)}))}},{key:"_selectWeightedRandomFrom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.weight},n=t.reduce((function(t,n){return t.count+=e(n),t.selectionList.push(t.count),t}),{count:0,selectionList:[]}),a=n.selectionList,r=n.count,i=this._random()*r,c=a.findIndex((function(t,e,n){var a=e>0?n[e-1]:0;return i>=a&&i<=t}));return t[c]}},{key:"stats",get:function(){return this._stats}},{key:"initialState",get:function(){return this.applyAction({params:this._initialParams},(function(t){return t}))}}]),t}()},23:function(t,e){},24:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(4),r=n(3),i=n(6),c=n(8),o=n(11);function s(t){return function(e){var n={params:{vars:e.state,flags:e.flags}},a=t(n);return{state:a.params.vars,flags:a.params.flags}}}var u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this._scenario=void 0,this._random=void 0,this._worldStateExtensions=void 0;var a=n.random,r=void 0===a?Math.random:a,c=n.worldStateExtensions,o=void 0===c?[]:c;this._scenario=e,this._random=r,this._worldStateExtensions=o}return Object(c.a)(t,[{key:"applyAction",value:function(t,e){return e(t)}},{key:"getUpdatedState",value:function(t,e,n){var a=this.getUpdatedWorld(n.modifiers,t.params);return{params:a,card:this.getNextCard(a,e,n)}}},{key:"getUpdatedWorld",value:function(t,e){var n=this,a=t.map((function(t){return Object(r.a)({type:"add",state:{},flags:{}},t)})),i=a.reduce((function(t,e){return n.updateWorldState(e,{state:t,flags:{}})}),e.state),c=a.reduce((function(t,e){return n.updateWorldFlags(e,{state:{},flags:t})}),e.flags);return this.applyWorldStateExtensions(this._worldStateExtensions,{state:i,flags:c})}},{key:"updateWorldState",value:function(t,e){var n="replace"===t.type?Object.assign({},this._scenario.defaultState.state):Object.assign({},e.state),r=t.state||{};return Object.entries(r).reduce((function(e,n){var r=Object(a.a)(n,2),i=r[0],c=r[1],o="set"===t.type||"replace"===t.type?c:c+(e[i]||0);return e[i]=Math.min(Math.max(o,0),100),e}),n)}},{key:"updateWorldFlags",value:function(t,e){var n="replace"===t.type?Object.assign({},this._scenario.defaultState.flags):Object.assign({},e.flags),r=t.flags||{};return Object.entries(r).reduce((function(t,e){var n=Object(a.a)(e,2),r=n[0],i=n[1];return t[r]=i,t}),n)}},{key:"applyWorldStateExtensions",value:function(t,e){return t.reduce((function(t,e){return e(t)}),e)}},{key:"getInitialCard",value:function(){var t=this.getAvailableEvents(this._scenario.defaultState),e=this.selectNextEvent(t);return this._cardDataToCard(e?this.selectEventCard(e.initialEventCardId):this.selectNextCard(this.getAvailableCards(this._scenario.defaultState)))}},{key:"getNextCard",value:function(t,e,n){var a,r=this._scenario.eventCards,i=this.getAvailableEvents(t),c=[],o="event"===e.type&&"nextEventCardId"in n?n.nextEventCardId:null,s=o?null:this.selectNextEvent(i);if(o){if(!r.hasOwnProperty(o))throw new Error('eventCardId "'.concat(o,"\" does not exist. Make sure it's spelled correctly"));a=this.selectEventCard(o)}else s?a=this.selectEventCard(s.initialEventCardId):(c=this.getAvailableCards(t),a=this.selectNextCard(c));if(!a)throw new Error("Content error. No next card available.");return this._cardDataToCard(a)}},{key:"getAvailableEvents",value:function(t){var e=this;return this._scenario.events.filter((function(n){return e.hasMatchingWorldQuery(t,n.isAvailableWhen)}))}},{key:"getAvailableCards",value:function(t){var e=this;return this._scenario.cards.filter((function(n){return e.hasMatchingWorldQuery(t,n.isAvailableWhen)}))}},{key:"hasMatchingWorldQuery",value:function(t,e){var n=this;return e.some((function(e){return n.isMatchingWorldQuery(t,e)}))}},{key:"isMatchingWorldQuery",value:function(t,e){var n=e.state,r=void 0===n?{}:n,i=e.flags,c=void 0===i?{}:i;return Object.entries(r).every((function(e){var n=Object(a.a)(e,2),r=n[0],i=Object(a.a)(n[1],2),c=i[0],o=i[1];return t.state[r]>=c&&t.state[r]<=o}))&&Object.entries(c).every((function(e){var n=Object(a.a)(e,2),r=n[0],i=n[1];return!!t.flags[r]===i}))}},{key:"selectNextEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.selectRandomFrom(t);if(e&&this._random()<=e.probability)return e}},{key:"selectEventCard",value:function(t){var e=this._scenario.eventCards[t];if(!e)throw new Error('ContentError: EventCard with EventCardId "'.concat(t,'" does not exist'));return e}},{key:"selectRandomFrom",value:function(t){return t[Math.floor(this._random()*t.length)]}},{key:"selectNextCard",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.selectWeightedRandomFrom(t)}},{key:"selectWeightedRandomFrom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.weight},n=t.reduce((function(t,n){return t.count+=e(n),t.selectionList.push(t.count),t}),{count:0,selectionList:[]}),a=n.selectionList,r=n.count,i=this._random()*r,c=a.findIndex((function(t,e,n){var a=e>0?n[e-1]:0;return i>=a&&i<=t}));return t[c]}},{key:"_cardDataToCard",value:function(t){var e,n,a,r,i,c,o,s=this;return{image:null!==(e=t.image)&&void 0!==e?e:"",title:null!==(n=t.title)&&void 0!==n?n:"",text:null!==(a=t.text)&&void 0!==a?a:"",location:null!==(r=t.location)&&void 0!==r?r:"",match:function(){return!0},weight:null!==(i=t.weight)&&void 0!==i?i:1,actions:{left:{description:null!==(c=t.actions.left.description)&&void 0!==c?c:"No",modifier:function(e){return s.getUpdatedState(e,t,t.actions.left)}},right:{description:null!==(o=t.actions.right.description)&&void 0!==o?o:"Yes",modifier:function(e){return s.getUpdatedState(e,t,t.actions.right)}}}}}},{key:"stats",get:function(){return this._scenario.stats.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{getValue:function(e){return e.params.state[t.id]}})}))}},{key:"initialState",get:function(){return{params:this.applyWorldStateExtensions(this._worldStateExtensions,this._scenario.defaultState),card:this.getInitialCard()}}}],[{key:"fromData",value:function(e){var n;return new t(e,{worldStateExtensions:(n=e.worldStateModifiers,Object(o.b)(n).map(s))})}}]),t}()},34:function(t,e,n){"use strict";var a=n(23);n.o(a,"BasicGameScenario")&&n.d(e,"BasicGameScenario",(function(){return a.BasicGameScenario}));n(17),n(14),n(11);var r=n(24);n.d(e,"BasicGameScenario",(function(){return r.a}))},35:function(t,e,n){"use strict";var a,r=n(7),i=n.n(r),c=n(12),o=n(4),s=n(26),u=n(2),d=n(5),l=n(1),f=n(3);function v(t){return function(e){return(0,e.theme.cardWidth)(t)}}!function(t){t[t.Left=-1]="Left",t[t.Right=1]="Right"}(a||(a={}));var h=v(.035),b=v(1),p=v(2),g=v(.5),m=v(.25),j=v(.125),O=v(.0625),x=v(.1),y=v(.05),w=v(.025),k=v(.0125),_=v(-.1125),S=d.b.div.withConfig({displayName:"CardView__CardContent",componentId:"sc-17kx3at-0"})(["font-size:",";& > .action-left,& > .action-right{font-size:160%;background:#fff;position:absolute;overflow:hidden;top:20%;max-width:",";min-width:",";padding:0;opacity:0;transition:transform 0.2s,opacity 0.2s;transform:translateX(0%) scale(0.7);box-shadow:0 12.5px 20px -10px rgba(50,50,73,0.4),0 10px 10px -10px rgba(50,50,73,0.3);& > .description{padding:",";text-align:center;}& > .arrow{background:#333;font-size:160%;color:#fff;padding-left:",";padding-right:",";}}& > .action-right{left:0;border-radius:",";& > .arrow{text-align:right;}}& > .action-left{right:0;border-radius:",";}& > .action-right.active{transform:translateX(-50%) scale(1);opacity:1;}& > .action-left.active{transform:translateX(50%) scale(1);opacity:1;}& > .card-view{display:block;will-change:transform;position:relative;width:",";height:",";border-radius:",";box-shadow:0 12.5px 20px -10px rgba(50,50,73,0.4),0 10px 10px -10px rgba(50,50,73,0.3);overflow:hidden;background:#fff;& > .card-image{width:100%;height:70%;background-repeat:no-repeat;background-position:center center;background-size:auto 120%;border:solid "," #fff;border-style:solid solid none solid;}& > .card-text{position:absolute;bottom:0;left:0;width:100%;min-height:30%;background:#fff;& > em.location{position:absolute;top:",";right:0;display:block;font-size:140%;background:rgba(230,230,230,0.7);border-radius:1vh 0 0 1vh;padding:"," "," "," ",";}& > h1.title{font-size:160%;white-space:nowrap;color:#fff;background:#333;display:block;margin:0;padding:"," ",";}& > p.text{font-size:160%;color:#333;padding:"," "," "," ",";margin:0;}}& > .card-back{width:100%;height:100%;border:solid "," #fff;box-sizing:border-box;background:url(",");background-size:auto 100%;background-repeat:repeat;background-position:center center;}}"],h,g,m,w,w,w,h,h,b,p,h,h,_,k,j,k,y,w,O,y,O,x,O,h,(function(t){return t.theme.cardBackImage}));S.defaultProps={theme:{cardWidth:function(t){return 40*t+"vh"},cardBackImage:"https://images.unsplash.com/photo-1550537687-c91072c4792d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=80"}};var C=function(t){var e=t.image,n=t.title,r=t.text,i=t.location,c=t.leftAction,o=t.rightAction,s=t.direction;return Object(u.jsxs)(S,{children:[Object(u.jsxs)("div",{className:"card-view",children:[Object(u.jsx)("div",{className:"card-image",style:{backgroundImage:"url("+(e||"")+")"}}),Object(u.jsxs)("div",{className:"card-text",children:[i&&Object(u.jsx)("em",{className:"location",children:i}),Object(u.jsx)("h1",{className:"title",children:n}),Object(u.jsx)("p",{className:"text",children:r})]})]}),Object(u.jsxs)("div",{className:"action-left"+(s===a.Left?" active":""),children:[Object(u.jsx)("div",{className:"description",children:null!==c&&void 0!==c?c:"No"}),Object(u.jsx)("div",{className:"arrow",children:"\u2190"})]}),Object(u.jsxs)("div",{className:"action-right"+(s===a.Right?" active":""),children:[Object(u.jsx)("div",{className:"description",children:null!==o&&void 0!==o?o:"Yes"}),Object(u.jsx)("div",{className:"arrow",children:"\u2192"})]})]})},E=function(t){var e=t.x,n=t.y,a=t.r,r=void 0===a?0:a,i=t.layer;return Object(u.jsx)("div",{style:{position:"absolute",left:"50%",transform:"translate3d(-50%, 0, 0) translate3d(".concat(.15*e,"vh, ").concat(.15*n,"vh, 0) perspective(1500px) rotate3d(1, 0, 0, 30deg) rotate3d(0, 0, 1, ").concat(r,"deg)"),transition:"transform 0.3s",zIndex:i},children:Object(u.jsx)(S,{children:Object(u.jsx)("div",{className:"card-view",children:Object(u.jsx)("div",{className:"card-back"})})})})},N=n(16),I=n(30),A=function(){return Math.min(200,window.innerWidth/2)},M=function(t){var e,n,r=t.i,i=t.card,c=t.onSwipe,s=t.layer,d=i.title,v=i.location,h=i.text,b=i.image,p=i.actions,g=Object(N.c)((function(){return Object(f.a)(Object(f.a)({},function(t){return{x:0,y:-30,scale:1,rot:0,delay:100*t}}(r)),{},{from:{rot:0,scale:1,y:-20,x:0}})})),m=Object(o.a)(g,2),j=m[0],O=m[1],x=Object(l.useState)(0),y=Object(o.a)(x,2),w=y[0],k=y[1],_=Object(l.useState)({isGone:!1,currentKey:null}),S=Object(o.a)(_,1)[0],E=function(t){Object(o.a)(t.args,1)[0];var e=t.down,n=Object(o.a)(t.delta,1)[0],a=(t.distance,Object(o.a)(t.direction,1)[0],t.velocity),r=Math.abs(n)*window.devicePixelRatio>A(),i=Math.sign(n);e||!r||S.isGone||(S.isGone=!0,window.setTimeout((function(){c(i),S.currentKey=null}),200)),k(e?i:0);var s=S.isGone,u=s?(200+window.innerWidth)*i:e?n:0;O({x:u,rot:n/100+(s?10*i*a:0),scale:e?1.1:1,delay:void 0,config:{friction:50,tension:e?800:s?200:500}})};e=["ArrowLeft","ArrowRight"],n=function(t,e){if(t&&!S.currentKey&&(S.currentKey=e),S.currentKey===e){var n="ArrowLeft"===e?a.Left:a.Right;E({down:t,delta:[n*(A()/window.devicePixelRatio+1),0],direction:[n,0],args:[0],distance:0,velocity:5})}},Object(l.useEffect)((function(){var t=function(t){e.includes(t.key)&&n(!0,t.key)},a=function(t){e.includes(t.key)&&n(!1,t.key)};return window.addEventListener("keydown",t),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",a)}}));var M=Object(I.a)((function(t){S.currentKey||E(t)})),W=j.x,L=j.y,R=j.rot,F=j.scale;return Object(l.createElement)(N.a.div,Object(f.a)(Object(f.a)({},M(r)),{},{key:r,style:{position:"absolute",left:"50%",transform:Object(N.b)([W,L,R,F],(function(t,e,n,a){return"translate3d(-50%, 0, 0) translate3d(".concat(.15*t,"vh,").concat(.15*e,"vh,0) ")+(r=n,i=Number(a),"perspective(1500px) rotate3d(1, 0, 0, 30deg) rotate3d(0, 0, 1, ".concat(r,"deg) scale(").concat(i,")"));var r,i})),zIndex:s}}),Object(u.jsx)(C,{image:b,title:d,text:h,location:v,leftAction:p.left.description,rightAction:p.right.description,direction:w}))};function W(t,e,n){return(e+t-n%e)%e}var L=function(t){var e=t.onSwipe,n=t.card,a=t.tick,r=void 0===a?0:a,i=Array.apply(null,Array(5)).map((function(t,e){return e}));return Object(u.jsxs)("div",{className:"deck-root",children:[i.map((function(t,e,n){return Object(u.jsx)(E,{x:0,y:n[W(e,n.length,r)]*(50/n.length)-20,r:1*Math.sin(2345*t),layer:n.length-W(e,n.length,r)},e)})),Object(u.jsx)(M,{i:0,card:n,onSwipe:e,layer:i.length+1},r)]})},R=n(32),F=n(31),P=n(33),T=d.b.div.withConfig({displayName:"Bar__Container",componentId:"sc-1d2had3-0"})(["width:5vh;height:1vh;background:#333;box-shadow:0 0.2vh 0.2vh rgba(0,0,0,0.2);"]),z=d.b.div.withConfig({displayName:"Bar__Value",componentId:"sc-1d2had3-1"})(["width:",";position:relative;height:100%;background:#fff;"],(function(t){return t.value+"%"})),B=function(t){var e=t.value,n=void 0===e?100:e;return Object(u.jsx)(T,{children:Object(u.jsx)(z,{value:n})})},D=d.b.header.withConfig({displayName:"Stats__Container",componentId:"e1jx7a-0"})(["background:#66aa55;display:flex;flex-direction:row;justify-content:center;align-items:center;flex-basis:10vh;flex-grow:0;flex-shrink:0;border-bottom:solid 0.5vh #fff;box-shadow:0 0.2vh 0.5vh rgba(0,0,0,0.5);"]),G=d.b.div.withConfig({displayName:"Stats__Stat",componentId:"e1jx7a-1"})(["display:flex;justify-content:space-between;align-items:center;flex-direction:column;margin-right:3.5vh;&:last-child{margin-right:0;}"]),U=d.b.div.withConfig({displayName:"Stats__Icon",componentId:"e1jx7a-2"})(["width:5vh;height:5vh;border-radius:50% 0;background:#fff;display:flex;justify-content:center;align-items:center;box-shadow:0 0.3vh 0.3vh rgba(0,0,0,0.2);margin-bottom:1vh;"]),K=function(t){var e=t.stats;return Object(u.jsx)(D,{children:e.map((function(t){var e=t.icon,n=t.icon,a=t.icon,r=F[e]||R[n]||P[a],i=t.iconSize||"80%",c=t.value;return Object(u.jsxs)(G,{children:[Object(u.jsx)(U,{children:r&&Object(u.jsx)(r,{size:i})}),Object(u.jsx)(B,{value:c})]},t.id)}))})},Q=d.b.footer.withConfig({displayName:"Game__Footer",componentId:"kxsm7q-0"})(["display:flex;justify-content:center;align-items:center;"]);var V=function(t){var e=t.game,n=Object(l.useState)((function(){return e.initialState})),r=Object(o.a)(n,2),i=r[0],c=r[1],s=Object(l.useState)(0),d=Object(o.a)(s,2),f=d[0],v=d[1],h=e.stats.map((function(t){return Object.assign({},t,{value:t.getValue(i)})}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(K,{stats:h}),i.card?Object(u.jsx)(L,{onSwipe:function(t){if(i.card){var n=t===a.Left?i.card.actions.left.modifier:i.card.actions.right.modifier;c(e.applyAction(i,n)),v(f+1)}},card:i.card,tick:f}):null,Object(u.jsx)(Q,{children:Object(u.jsx)("div",{className:"time-remaining"})})]})},H=n(34),J=n(9),X=n(14),Y=n(17),q=n(11);function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n={flags:t.defaultState.flags,vars:t.defaultState.state},a=t.cards.map((function(t){return nt(t,n)})),r=at(t.eventCards,n),i=t.events.map((function(t){return $(t,r[t.initialEventCardId],e)})),c=et(t.stats),o=tt(t.stats),s=Object(q.b)(t.worldStateModifiers);return new Y.a(Object(J.a)(a),o,n,{tickModifiers:[].concat(Object(J.a)(i),Object(J.a)(s),[c]),random:e})}function $(t,e,n){var a=t.isAvailableWhen.map(ct);return function(r){var i=!r.card,c=n()<=t.probability;return i&&c&&Object(X.a)(r.params,a)?Object(f.a)(Object(f.a)({},r),{},{card:e}):r}}function tt(t){return t.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{getValue:function(e){var n;return null!==(n=e.params.vars[t.id])&&void 0!==n?n:0}})}))}function et(t){var e=t.map((function(t){return t.id}));return Object(q.a)(e,0,100)}function nt(t,e){var n=("isAvailableWhen"in t?t.isAvailableWhen:[]).map(ct);return{image:t.image,title:t.title,text:t.text,location:t.location,match:function(t){return Object(X.a)(t.params,n)},weight:t.weight,actions:{left:it(t.actions.left,e,"No"),right:it(t.actions.right,e,"Yes")}}}function at(t,e){var n=Object.keys(t).reduce((function(n,a){var r=t[a];return n[a]=nt(r,e),n}),{});for(var a in n){var r=t[a],i=n[a];i.actions.left.modifier=rt(r.actions.left,n,i.actions.left.modifier),i.actions.right.modifier=rt(r.actions.right,n,i.actions.right.modifier)}return n}function rt(t,e,n){var a=null!==t.nextEventCardId?e[t.nextEventCardId]:null;return a?function(t){return Object(f.a)(Object(f.a)({},n(t)),{},{card:a})}:n}function it(t,e,n){var a;return{description:null!==(a=t.description)&&void 0!==a?a:n,modifier:function(n){return function(t,e,n){return Object(f.a)(Object(f.a)({},t),{},{params:{vars:e.reduce((function(t,e){return function(t,e,n){var a="replace"===e.type?Object.assign({},n):Object.assign({},t),r=e.state||{};return Object.entries(r).reduce((function(t,n){var a=Object(o.a)(n,2),r=a[0],i=a[1],c="set"===e.type||"replace"===e.type?i:i+(t[r]||0);return t[r]=Math.min(Math.max(c,0),100),t}),a)}(t,e,n.vars)}),t.params.vars),flags:e.reduce((function(t,e){return function(t,e,n){var a="replace"===e.type?Object.assign({},n):Object.assign({},t),r=e.flags||{};return Object.entries(r).reduce((function(t,e){var n=Object(o.a)(e,2),a=n[0],r=n[1];return t[a]=r,t}),a)}(t,e,n.flags)}),t.params.flags)}})}(n,t.modifiers,e)}}}function ct(t){return{vars:t.state,flags:t.flags}}function ot(t){return st.apply(this,arguments)}function st(){return(st=Object(c.a)(i.a.mark((function t(e){var n,a,r,c,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.match(/^local:\/\/(.*)/))){t.next=10;break}if(a=n[1],r="game_world:"+a,c={stats:[],cards:[],events:[],eventCards:{},defaultState:{state:{},flags:{}},worldStateModifiers:[]},o=localStorage.getItem(r),s=o?JSON.parse(o):null){t.next=9;break}throw new Error("Could not load data from local storage: "+r);case 9:return t.abrupt("return",Object.assign(c,s));case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ut(t){return dt.apply(this,arguments)}function dt(){return(dt=Object(c.a)(i.a.mark((function t(e){var n,a,r,c,s,u,d,l,f,v,h,b,p,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e+"/stats.json",a=e+"/cards.json",r=e+"/events.json",c=e+"/event-cards.json",s=e+"/default-state.json",u=e+"/modifiers.json",t.next=8,Promise.all([vt(n),vt(a),vt(r),vt(c),vt(s),vt(u)]);case 8:return d=t.sent,l=Object(o.a)(d,6),f=l[0],v=l[1],h=l[2],b=l[3],p=l[4],g=l[5],t.abrupt("return",{stats:f,cards:v,events:h,eventCards:b,defaultState:p,worldStateModifiers:g});case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(t){return ft.apply(this,arguments)}function ft(){return(ft=Object(c.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot(e);case 2:if(t.t0=t.sent,t.t0){t.next=7;break}return t.next=6,ut(e);case 6:t.t0=t.sent;case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vt(t){return ht.apply(this,arguments)}function ht(){return(ht=Object(c.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetching path: ",e),t.next=3,window.fetch(e);case 3:return t.next=5,t.sent.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(){var t=Object(s.a)(["\n    * {\n        box-sizing: border-box;\n    }\n\n    html,\n    body {\n        margin: 0;\n        padding: 0;\n        height: 100%;\n        width: 100%;\n        user-select: none;\n        position: fixed;\n        overflow: hidden;\n    }\n"]);return bt=function(){return t},t}var pt=d.b.main.withConfig({displayName:"App__Container",componentId:"sc-1p3585w-0"})(["position:absolute;top:0;left:0;width:100vw;height:100%;background:#ccdddd;display:flex;flex-direction:column;"]),gt=Object(d.a)(bt());e.a=function(t){var e=t.path,n=t.useBasicGame,a=void 0!==n&&n,r=Object(l.useState)(null),s=Object(o.a)(r,2),d=s[0],f=s[1];return Object(l.useEffect)((function(){(function(){var t=Object(c.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt(e);case 2:(n=t.sent)?(r=a?H.BasicGameScenario.fromData(n):Z(n),f(r)):console.warn("Scenario loading error");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,a,f]),Object(u.jsxs)(pt,{children:[Object(u.jsx)(gt,{}),d&&Object(u.jsx)(V,{game:d})]})}},36:function(t,e,n){"use strict";n.r(e),function(t){var e,a,r=n(2),i=(n(1),n(25)),c=n.n(i),o=(n(42),n(35)),s=new URLSearchParams(window.location.search).get("path")||(null===(e=t)||void 0===e||null===(a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SFF_DEFAULT_SCENARIO:"https://muthaias.github.io/swipeforfuture-content/default"}))||void 0===a?void 0:a.REACT_APP_SFF_DEFAULT_SCENARIO);s&&c.a.render(Object(r.jsx)(o.a,{path:s}),document.getElementById("root"))}.call(this,n(22))},42:function(t,e,n){}},[[36,1,2]]]);
//# sourceMappingURL=main.8d5938f0.chunk.js.map