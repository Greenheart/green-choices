var t=Object.defineProperty,e=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(e,a,n)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,o=(t,e)=>{for(var a in e||(e={}))s.call(e,a)&&i(t,a,e[a]);if(n)for(var a of n(e))r.call(e,a)&&i(t,a,e[a]);return t},c=(t,n)=>e(t,a(n));import{S as l,i as u,s as d,e as f,c as h,a as m,d as p,b as g,N as v,f as x,F as w,J as y,t as $,k as b,j as E,g as j,n as S,m as O,o as I,h as L,x as k,u as D,v as _,r as M,w as P,O as V,D as X,P as A,Q as R,G as z,H as C,I as N,R as Y,T as H,U as W,V as F,C as J,A as T,l as U,W as B,X as G}from"../chunks/vendor-daa89e39.js";var Q,q;(q=Q||(Q={}))[q.Left=-1]="Left",q[q.Right=1]="Right";function K(t,e){return e.some((e=>function(t,{vars:e={},flags:a={}}){const n=Object.entries(e).every((([e,[a,n]])=>t.vars[e]>=a&&t.vars[e]<=n));return n&&Object.entries(a).every((([e,a])=>!!t.flags[e]===a))}(t,e)))}class Z{constructor(t,e,a,n={}){const{random:s=Math.random,tickModifiers:r=[]}=n;this._cards=t,this._random=s,this._tickModifiers=r,this._initialParams=a,this._stats=e}get stats(){return this._stats}get initialState(){return this.applyAction({params:this._initialParams},(t=>t))}applyAction(t,e){const a=this._applyModifiers(c(o({},t),{card:void 0}),[e,...this._tickModifiers]);return a.card?a:c(o({},a),{card:this._selectWeightedRandomFrom(this._getAvailableCards(a))})}_applyModifiers(t,e){return e.reduce(((t,e)=>e(t)),t)}_getAvailableCards(t){const e=this._cards.filter((e=>e.match(t))),a={};for(const n of e)a[n.priority]=a[n.priority]?a[n.priority].concat(n):[n];return a[Math.min(...Object.keys(a).map((t=>parseInt(t,10))))]}_selectWeightedRandomFrom(t,e=(t=>t.weight)){const{selectionList:a,count:n}=t.reduce(((t,a)=>(t.count+=e(a),t.selectionList.push(t.count),t)),{count:0,selectionList:[]}),s=this._random()*n;return t[a.findIndex(((t,e,a)=>{const n=e>0?a[e-1]:0;return s>=n&&s<=t}))]}}const tt=t=>{var e;return c(o({},t),{params:{vars:c(o({},t.params.vars),{rounds:(null!=(e=t.params.vars.rounds)?e:0)+1}),flags:t.params.flags}})};function et(t,e,a,n){return s=>{const r=s.params,i=e.map((t=>{var e;return null!=(e=r.vars[t])?e:0})),l=n?i.reduce(((t,e)=>a(t,e)),n):i.reduce(((t,e)=>a(t,e)));return c(o({},s),{params:{flags:s.params.flags,vars:c(o({},s.params.vars),{[t]:l})}})}}function at(t){return t.map((t=>{switch(t.type){case"round":return tt;case"cycle":return n=t.id,s=t.length,t=>{var e;return c(o({},t),{params:{vars:c(o({},t.params.vars),{[n]:((null!=(e=t.params.vars[n])?e:0)+1)%s}),flags:t.params.flags}})};case"min":return et(t.targetId,t.sourceIds,((t,e)=>Math.min(t,e)));case"max":return et(t.targetId,t.sourceIds,((t,e)=>Math.max(t,e)));case"sum":return et(t.targetId,t.sourceIds,((t,e)=>t+e),0);case"debug":return e=t.stateIds,a=t.flagIds,t=>{const n=t.params,s=void 0===e?n.vars:e.reduce(((t,e)=>(t[e]=n.vars[e],t)),{}),r=void 0===a?n.flags:a.reduce(((t,e)=>(t[e]=n.flags[e],t)),{});return Object.keys(s).length>0&&console.table(s),Object.keys(r).length>0&&console.table(r),t};default:throw new Error("Missing modifier type: "+t.type)}var e,a,n,s}))}function nt(t,e=Math.random){const a={flags:t.defaultState.flags,vars:t.defaultState.state},n=function(t,e){const a=Object.keys(t).reduce(((a,n)=>{const s=t[n];return a[n]=function(t,e){const a=("isAvailableWhen"in t?t.isAvailableWhen:[]).map(it);return{id:t.id,image:t.image,title:t.title,text:t.text,location:t.location,match:t=>K(t.params,a),weight:t.weight,actions:{left:rt(t.actions.left,e,"No"),right:rt(t.actions.right,e,"Yes")},priority:t.priority}}(s,e),a}),{});for(const n in a){const e=t[n],s=a[n];s.actions.left.modifier=st(e.actions.left,a,s.actions.left.modifier),s.actions.right.modifier=st(e.actions.right,a,s.actions.right.modifier)}return a}(t.cards.reduce(((t,e)=>(t[e.id]=e,t)),{}),a);console.log("Loaded cards:",n);const s=function(t){return e=t.map((t=>t.id)),a=0,n=100,t=>c(o({},t),{params:{flags:t.params.flags,vars:o(o({},t.params.vars),e.reduce(((e,s)=>{const r=t.params.vars[s];return void 0!==r&&(e[s]=Math.max(a,Math.min(n,r))),e}),{}))}});var e,a,n}(t.stats),r=function(t){return t.map((t=>c(o({},t),{getValue:({params:e})=>{var a;return null!=(a=e.vars[t.id])?a:0}})))}(t.stats),i=at(t.worldStateModifiers);return new Z(Object.values(n),r,a,{tickModifiers:[...i,s],random:e})}function st(t,e,a){const n=t.next?e[t.next]:void 0;return n?t=>c(o({},a(t)),{card:n}):a}function rt(t,e,a){var n;return{description:null!=(n=t.description)?n:a,modifier:a=>function(t,e,a){return c(o({},t),{params:{vars:e.reduce(((t,e)=>function(t,e,a){const n="replace"===e.type?Object.assign({},a):Object.assign({},t),s=e.state||{};return Object.entries(s).reduce(((t,[a,n])=>{const s="set"===e.type||"replace"===e.type?n:n+(t[a]||0);return t[a]=Math.min(Math.max(s,0),100),t}),n)}(t,e,a.vars)),t.params.vars),flags:e.reduce(((t,e)=>function(t,e,a){const n="replace"===e.type?Object.assign({},a):Object.assign({},t),s=e.flags||{};return Object.entries(s).reduce(((t,[e,a])=>(t[e]=a,t)),n)}(t,e,a.flags)),t.params.flags)}})}(a,t.modifiers,e),next:t.next}}function it(t){return{vars:t.state,flags:t.flags}}async function ot(t){return await async function(t){const e=t.match(/^local:\/\/(.*)/);if(e){const t="game_world:"+e[1],a={stats:[],cards:[],defaultState:{state:{},flags:{}},worldStateModifiers:[]},n=localStorage.getItem(t),s=n?JSON.parse(n):null;if(!s)throw new Error("Could not load data from local storage: "+t);return Object.assign(a,s)}return null}(t)||await async function(t){return console.log("Fetching path: ",t),await(await window.fetch(t)).json()}(t)}function ct(t){let e,a;return{c(){e=f("div"),a=f("div"),this.h()},l(t){e=h(t,"DIV",{class:!0});var n=m(e);a=h(n,"DIV",{class:!0,style:!0}),m(a).forEach(p),n.forEach(p),this.h()},h(){g(a,"class","relative h-full bg-white"),v(a,"width",t[0]+"%"),g(e,"class","w-8 h-1 2xs:w-10 2xs:h-1.5 xs:w-12 xs:h-2 bg-gray-800 shadow-lg")},m(t,n){x(t,e,n),w(e,a)},p(t,[e]){1&e&&v(a,"width",t[0]+"%")},i:y,o:y,d(t){t&&p(e)}}}function lt(t,e,a){let{value:n}=e;return t.$$set=t=>{"value"in t&&a(0,n=t.value)},[n]}class ut extends l{constructor(t){super(),u(this,t,lt,ct,d,{value:0})}}function dt(t,e,a){const n=t.slice();return n[1]=e[a],n}function ft(t){let e,a,n,s,r,i,o,c=t[1].name.slice(0,2)+"";return r=new ut({props:{value:t[1].value}}),{c(){e=f("div"),a=f("div"),n=$(c),s=b(),E(r.$$.fragment),i=b(),this.h()},l(t){e=h(t,"DIV",{class:!0});var o=m(e);a=h(o,"DIV",{class:!0});var l=m(a);n=j(l,c),l.forEach(p),s=S(o),O(r.$$.fragment,o),i=S(o),o.forEach(p),this.h()},h(){g(a,"class","w-8 h-8 2xs:w-10 2xs:h-10 xs:w-12 xs:h-12 rounded-full bg-white grid place-items-center shadow-lg mb-2 xs:mb-3 text-black text-sm"),g(e,"class","flex justify-between items-center flex-col")},m(t,c){x(t,e,c),w(e,a),w(a,n),w(e,s),I(r,e,null),w(e,i),o=!0},p(t,e){(!o||1&e)&&c!==(c=t[1].name.slice(0,2)+"")&&L(n,c);const a={};1&e&&(a.value=t[1].value),r.$set(a)},i(t){o||(k(r.$$.fragment,t),o=!0)},o(t){D(r.$$.fragment,t),o=!1},d(t){t&&p(e),_(r)}}}function ht(t){let e,a,n=t[0],s=[];for(let i=0;i<n.length;i+=1)s[i]=ft(dt(t,n,i));const r=t=>D(s[t],1,1,(()=>{s[t]=null}));return{c(){e=f("header");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=h(t,"HEADER",{class:!0});var a=m(e);for(let e=0;e<s.length;e+=1)s[e].l(a);a.forEach(p),this.h()},h(){g(e,"class","flex bg-green-700 xs:space-x-10 justify-around xs:justify-center items-center p-2 2xs:p-4 shadow-lg")},m(t,n){x(t,e,n);for(let a=0;a<s.length;a+=1)s[a].m(e,null);a=!0},p(t,[a]){if(1&a){let i;for(n=t[0],i=0;i<n.length;i+=1){const r=dt(t,n,i);s[i]?(s[i].p(r,a),k(s[i],1)):(s[i]=ft(r),s[i].c(),k(s[i],1),s[i].m(e,null))}for(M(),i=n.length;i<s.length;i+=1)r(i);P()}},i(t){if(!a){for(let t=0;t<n.length;t+=1)k(s[t]);a=!0}},o(t){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)D(s[e]);a=!1},d(t){t&&p(e),V(s,t)}}}function mt(t,e,a){let{stats:n}=e;return t.$$set=t=>{"stats"in t&&a(0,n=t.stats)},[n]}class pt extends l{constructor(t){super(),u(this,t,mt,ht,d,{stats:0})}}function gt(t){let e,a,n,s;function r(t,r,i){"panstart"===t&&(n=r,s=i);const o={x:r,y:i,dx:r-e,dy:i-a,startY:s,startX:n,totalDeltaX:r-n,totalDeltaY:i-s};return e=r,a=i,new CustomEvent(t,{detail:o})}function i(e){t.dispatchEvent(r("panstart",e.clientX,e.clientY)),window.addEventListener("pointermove",o),window.addEventListener("pointerup",c)}function o(e){t.dispatchEvent(r("panmove",e.clientX,e.clientY))}function c(e){t.dispatchEvent(r("panend",e.clientX,e.clientY)),window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",c)}return t.addEventListener("pointerdown",i),{destroy(){t.removeEventListener("pointerdown",i)}}}function vt(t){let e,a,n,s,r,i,o;return{c(){e=f("div"),a=f("div"),n=f("span"),s=$(t[2]),this.h()},l(r){e=h(r,"DIV",{class:!0});var i=m(e);a=h(i,"DIV",{class:!0,style:!0});var o=m(a);n=h(o,"SPAN",{class:!0,style:!0});var c=m(n);s=j(c,t[2]),c.forEach(p),o.forEach(p),i.forEach(p),this.h()},h(){g(n,"class",r="relative top-60 "+(t[3]===Q.Left?"right-40":"left-40")),v(n,"text-shadow","0 2px 4px #000"),g(a,"class",i="absolute -top-56 bg-gray-800 bg-opacity-50 text-md w-[180%] h-80 p-4 overflow-hidden "+(t[3]===Q.Left?"-right-40 text-right":"-left-40")),v(a,"transform","rotate3d(0, 0, 1, "+-.05*t[6].x+"deg)"),v(a,"opacity",t[4]),g(e,"class",o="absolute overflow-hidden "+t[0])},m(t,r){x(t,e,r),w(e,a),w(a,n),w(n,s)},p(t,c){4&c&&L(s,t[2]),8&c&&r!==(r="relative top-60 "+(t[3]===Q.Left?"right-40":"left-40"))&&g(n,"class",r),8&c&&i!==(i="absolute -top-56 bg-gray-800 bg-opacity-50 text-md w-[180%] h-80 p-4 overflow-hidden "+(t[3]===Q.Left?"-right-40 text-right":"-left-40"))&&g(a,"class",i),64&c&&v(a,"transform","rotate3d(0, 0, 1, "+-.05*t[6].x+"deg)"),16&c&&v(a,"opacity",t[4]),1&c&&o!==(o="absolute overflow-hidden "+t[0])&&g(e,"class",o)},d(t){t&&p(e)}}}function xt(t){let e,a,n,s,r,i,o=t[2]&&t[3]&&vt(t);const c=t[13].default,l=X(c,t,t[12],null);return{c(){e=f("div"),o&&o.c(),a=b(),l&&l.c(),this.h()},l(t){e=h(t,"DIV",{class:!0,style:!0});var n=m(e);o&&o.l(n),a=S(n),l&&l.l(n),n.forEach(p),this.h()},h(){g(e,"class","shadow-md rounded-md cursor-move relative"),g(e,"style",n="transform:\r\n        translate3d("+t[6].x+"px, "+t[6].y+"px, 0)\r\n        rotate3d(0, 0, 1, "+.05*t[6].x+"deg);\r\n        "+(t[1]?wt:""))},m(n,c){x(n,e,c),o&&o.m(e,null),w(e,a),l&&l.m(e,null),s=!0,r||(i=[A(gt.call(null,e)),R(e,"panstart",t[7]),R(e,"panmove",t[8]),R(e,"panend",t[9])],r=!0)},p(t,[r]){t[2]&&t[3]?o?o.p(t,r):(o=vt(t),o.c(),o.m(e,a)):o&&(o.d(1),o=null),l&&l.p&&(!s||4096&r)&&z(l,c,t,t[12],s?N(c,t[12],r,null):C(t[12]),null),(!s||66&r&&n!==(n="transform:\r\n        translate3d("+t[6].x+"px, "+t[6].y+"px, 0)\r\n        rotate3d(0, 0, 1, "+.05*t[6].x+"deg);\r\n        "+(t[1]?wt:"")))&&g(e,"style",n)},i(t){s||(k(l,t),s=!0)},o(t){D(l,t),s=!1},d(t){t&&p(e),o&&o.d(),l&&l.d(t),r=!1,Y(i)}}}const wt="transition: transform 250ms ease-out";function yt(t,e,a){let n,{$$slots:s={},$$scope:r}=e;var i=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(s,r){function i(t){try{c(n.next(t))}catch(e){r(e)}}function o(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))};let o,{onSwipe:c}=e,{actions:l}=e,{imageSize:u}=e,d=!1,f="",h=0;const m=H({x:0,y:0},{stiffness:.2,damping:.4});return W(t,m,(t=>a(6,n=t))),t.$$set=t=>{"onSwipe"in t&&a(10,c=t.onSwipe),"actions"in t&&a(11,l=t.actions),"imageSize"in t&&a(0,u=t.imageSize),"$$scope"in t&&a(12,r=t.$$scope)},[u,d,f,o,h,m,n,function(){a(5,m.stiffness=a(5,m.damping=1,m),m)},function(t){m.update((e=>({x:e.x+t.detail.dx,y:e.y+t.detail.dy}))),t.detail.totalDeltaX>0?(a(2,f=l.right.description),a(3,o=Q.Right),a(4,h=.017*t.detail.totalDeltaX)):t.detail.totalDeltaX<0&&(a(2,f=l.left.description),a(3,o=Q.Left),a(4,h=Math.abs(.017*t.detail.totalDeltaX)))},function(t){return i(this,void 0,void 0,(function*(){a(2,f=""),a(3,o=void 0),a(4,h=0),t.detail.totalDeltaX>100?(a(1,d=!0),F(m,n.x=200+window.innerHeight*Q.Right,n),yield c(Q.Right),a(1,d=!1)):t.detail.totalDeltaX<-100?(a(1,d=!0),F(m,n.x=200+window.innerHeight*Q.Left,n),yield c(Q.Left),a(1,d=!1)):(a(5,m.stiffness=.2,m),a(5,m.damping=.8,m)),m.set({x:0,y:0})}))},c,l,r,s]}class $t extends l{constructor(t){super(),u(this,t,yt,xt,d,{onSwipe:10,actions:11,imageSize:0})}}function bt(t){let e;return{c(){e=f("div"),this.h()},l(t){e=h(t,"DIV",{style:!0,class:!0}),m(e).forEach(p),this.h()},h(){v(e,"background-image","url("+t[0].image+")"),g(e,"class","bg-no-repeat bg-center "+jt+" z-10 bg-cover svelte-1lu8ytm")},m(t,a){x(t,e,a)},p(t,a){1&a&&v(e,"background-image","url("+t[0].image+")")},d(t){t&&p(e)}}}function Et(t){let e,a,n,s,r,i,o,c,l,u,d,v,y,M,P,V=t[0].text+"",X=t[0].title+"",A=t[0].location+"";return c=new $t({props:{onSwipe:t[1],actions:t[0].actions,imageSize:jt,$$slots:{default:[bt]},$$scope:{ctx:t}}}),{c(){e=f("div"),a=f("p"),n=$(V),s=b(),r=f("div"),i=f("div"),o=b(),E(c.$$.fragment),l=b(),u=f("h2"),d=$(X),v=b(),y=f("p"),M=$(A),this.h()},l(t){e=h(t,"DIV",{class:!0});var f=m(e);a=h(f,"P",{class:!0});var g=m(a);n=j(g,V),g.forEach(p),s=S(f),r=h(f,"DIV",{class:!0});var x=m(r);i=h(x,"DIV",{class:!0}),m(i).forEach(p),o=S(x),O(c.$$.fragment,x),x.forEach(p),l=S(f),u=h(f,"H2",{class:!0});var w=m(u);d=j(w,X),w.forEach(p),v=S(f),y=h(f,"P",{class:!0});var $=m(y);M=j($,A),$.forEach(p),f.forEach(p),this.h()},h(){g(a,"class","text-center xs:py-4 h-36 2xs:h-44 xs:h-56 flex place-items-center px-4 xs:px-8"),g(i,"class","absolute z-0 "+jt+" top-0 left-0 bg-gray-900 svelte-1lu8ytm"),g(r,"class",jt+" relative svelte-1lu8ytm"),g(u,"class","mt-2 xs:mt-4"),g(y,"class","text-gray-300 mb-2 xs:mb-4"),g(e,"class","flex flex-col items-center justify-center text-white 2xs:text-lg xs:text-xl font-light max-w-prose m-auto card svelte-1lu8ytm")},m(t,f){x(t,e,f),w(e,a),w(a,n),w(e,s),w(e,r),w(r,i),w(r,o),I(c,r,null),w(e,l),w(e,u),w(u,d),w(e,v),w(e,y),w(y,M),P=!0},p(t,[e]){(!P||1&e)&&V!==(V=t[0].text+"")&&L(n,V);const a={};2&e&&(a.onSwipe=t[1]),1&e&&(a.actions=t[0].actions),5&e&&(a.$$scope={dirty:e,ctx:t}),c.$set(a),(!P||1&e)&&X!==(X=t[0].title+"")&&L(d,X),(!P||1&e)&&A!==(A=t[0].location+"")&&L(M,A)},i(t){P||(k(c.$$.fragment,t),P=!0)},o(t){D(c.$$.fragment,t),P=!1},d(t){t&&p(e),_(c)}}}const jt="w-[60vmin] h-[60vmin] 2xs:w-[85vmin] 2xs:h-[85vmin] max-w-[400px] max-h-[400px] rounded-lg";function St(t,e,a){let{card:n}=e,{onSwipe:s}=e;return t.$$set=t=>{"card"in t&&a(0,n=t.card),"onSwipe"in t&&a(1,s=t.onSwipe)},[n,s]}class Ot extends l{constructor(t){super(),u(this,t,St,Et,d,{card:0,onSwipe:1})}}function It(t){let e,a;return e=new Ot({props:{card:t[0].card,onSwipe:t[3]}}),{c(){E(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){I(e,t,n),a=!0},p(t,a){const n={};1&a&&(n.card=t[0].card),e.$set(n)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){D(e.$$.fragment,t),a=!1},d(t){_(e,t)}}}function Lt(t){let e,a,n,s,r,i;a=new pt({props:{stats:t[1]}});let o=t[0].card&&It(t);return{c(){e=f("main"),E(a.$$.fragment),n=b(),o&&o.c(),this.h()},l(t){e=h(t,"MAIN",{class:!0});var s=m(e);O(a.$$.fragment,s),n=S(s),o&&o.l(s),s.forEach(p),this.h()},h(){g(e,"class","text-white")},m(t,c){x(t,e,c),I(a,e,null),w(e,n),o&&o.m(e,null),s=!0,r||(i=[R(e,"contextmenu",kt),R(e,"dragstart",kt),R(e,"select",kt)],r=!0)},p(t,[n]){const s={};2&n&&(s.stats=t[1]),a.$set(s),t[0].card?o?(o.p(t,n),1&n&&k(o,1)):(o=It(t),o.c(),k(o,1),o.m(e,null)):o&&(M(),D(o,1,1,(()=>{o=null})),P())},i(t){s||(k(a.$$.fragment,t),k(o),s=!0)},o(t){D(a.$$.fragment,t),D(o),s=!1},d(t){t&&p(e),_(a),o&&o.d(),r=!1,Y(i)}}}function kt(t){return t.preventDefault(),t.stopPropagation(),!1}function Dt(t,e,a){let n,{game:s}=e;const r=J(s.initialState);let i;return W(t,r,(t=>a(0,n=t))),T((()=>(document.documentElement.classList.add("in-game"),()=>document.documentElement.classList.remove("in-game")))),t.$$set=t=>{"game"in t&&a(4,s=t.game)},t.$$.update=()=>{17&t.$$.dirty&&a(1,i=s.stats.map((t=>Object.assign({},t,{value:t.getValue(n)}))))},[n,i,r,function(t){if(!n.card)return Promise.resolve();const e=t===Q.Left?n.card.actions.left.modifier:n.card.actions.right.modifier;return new Promise((t=>{setTimeout((()=>{F(r,n=s.applyAction(n,e),n),t()}),250)}))},s]}class _t extends l{constructor(t){super(),u(this,t,Dt,Lt,d,{game:4})}}function Mt(t){let e,a;return{c(){e=f("p"),a=$("Loading..."),this.h()},l(t){e=h(t,"P",{class:!0});var n=m(e);a=j(n,"Loading..."),n.forEach(p),this.h()},h(){g(e,"class","grid place-items-center text-white font-black text-2xl tracking-widest h-[60vh]")},m(t,n){x(t,e,n),w(e,a)},p:y,i:y,o:y,d(t){t&&p(e)}}}function Pt(t){let e,a,n,s={ctx:t,current:null,token:null,hasCatch:!1,pending:At,then:Xt,catch:Vt,value:3,blocks:[,,,]};return B(a=t[1](t[0]),s),{c(){e=U(),s.block.c()},l(t){e=U(),s.block.l(t)},m(t,a){x(t,e,a),s.block.m(t,s.anchor=a),s.mount=()=>e.parentNode,s.anchor=e,n=!0},p(e,n){t=e,s.ctx=t,1&n&&a!==(a=t[1](t[0]))&&B(a,s)||G(s,t,n)},i(t){n||(k(s.block),n=!0)},o(t){for(let e=0;e<3;e+=1){const t=s.blocks[e];D(t)}n=!1},d(t){t&&p(e),s.block.d(t),s.token=null,s=null}}}function Vt(t){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function Xt(t){let e,a;return e=new _t({props:{game:t[3]}}),{c(){E(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){I(e,t,n),a=!0},p(t,a){const n={};1&a&&(n.game=t[3]),e.$set(n)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){D(e.$$.fragment,t),a=!1},d(t){_(e,t)}}}function At(t){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function Rt(t){let e,a,n,s;const r=[Pt,Mt],i=[];function o(t,e){return t[0]?0:1}return e=o(t),a=i[e]=r[e](t),{c(){a.c(),n=U()},l(t){a.l(t),n=U()},m(t,a){i[e].m(t,a),x(t,n,a),s=!0},p(t,[s]){let c=e;e=o(t),e===c?i[e].p(t,s):(M(),D(i[c],1,1,(()=>{i[c]=null})),P(),a=i[e],a?a.p(t,s):(a=i[e]=r[e](t),a.c()),k(a,1),a.m(n.parentNode,n))},i(t){s||(k(a),s=!0)},o(t){D(a),s=!1},d(t){i[e].d(t),t&&p(n)}}}function zt(t,e,a){var n=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(s,r){function i(t){try{c(n.next(t))}catch(e){r(e)}}function o(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))};let s;return T((()=>{var t;const e=new URLSearchParams(window.location.search),n=e.get("dev"),r=n?`//${window.location.host}/dev-only/${n}.json`:void 0;a(0,s=r||(null!==(t=e.get("path"))&&void 0!==t?t:"https://muthaias.github.io/swipeforfuture-content/default.json"))})),[s,function(t){return n(this,void 0,void 0,(function*(){const e=yield ot(t);if(e)return nt(e);throw new Error(`Could not load scenario data: ${t}`)}))}]}class Ct extends l{constructor(t){super(),u(this,t,zt,Rt,d,{})}}export{Ct as default};
